.TH mkhalo 1falcON "02 November 2007"
.SH name
mkhalo \- initial conditions from quite general spherical model (public version)

.SH synopsis
\fBmkhalo\fP [parameter=value]

.SH requirement
requires NEMO version 3.0.13 or higher, see http://www.astro.umd.edu/nemo.

.SH description
\fBmkhalo\fP creates N-body initial conditions with spherical density
.nf

	                        trunc(r/|r_t|)
	rho(r) = C ------------------------------------,
	            inner     eta     (outer-inner)/eta
	           x      * (x    + 1) 

.if

with
.nf
        trunc(x) = sech(x)                   if r_t > 0
                           2
                 = ------------------        if r_t < 0
                   sech(x) +1/sech(x)

.if

and
.nf
                   2    2
        x  = sqrt(r  + r_c)/r_s

.if

Default parameters will construct a Dehnen & McLaughlin (2005) model.

.SH parameters

.TP 13
\fBout=\fP\fIfile\fP
The initial conditions are written in NEMO snapshot format to \fIfile\fP.
If \fIfile\fP=-, output is made to stdout. Default: \fBrequired\fP.
.TP
\fBnbody=\fP\fInum\fP
The initial conditions will contain \fInum\fP body masses, positions,
and velocities. Default: \fBrequired\fP.
.TP
\fBinner=\fP\fIval\fP
The inner logarithmic slope (parameter inner above) is set to \fIval\fP.
Default: \fB7/9\fP.
.TP
\fBouter=\fP\fIval\fP
The outer logarithmic slope (parameter outer above) is set to \fIval\fP.
\fBNote\fPin order for the total mass to be finite (required), the outer slope
must either be larger than 3 or the truncation radius (see \fBr_t\fP below) must
be finite (or both).  Default: \fB31/9\fP.
.TP
\fBeta=\fP\fIval\fP
The parameter eta, controlling the transitions in power-law slopes,
is set to \fIval\fP.
Default: \fB4/9\fP.
.TP
\fBmass=\fP\fIval\fP
The total mass of the model is set to \fIval\fP;
used to determine the constant C. Default: \fB1\fP.
.TP
\fBr_s=\fP\fIval\fP
The scale radius of the halo model is set to \fIval\fP. Default: \fB1\fP.
.TP
\fBr_2=\fP\fIval\fP
If given, \fBr_s\fP is ignored and the scale radius set to

r_s = \fIval\fP * ( [2-inner]/[outer-2] )^[1/eta]

such that for zero core radius and infinite truncation radius the
negative logarithmic density slope equals 2 at radius equal \fIval\fP.
No Default.
.TP
\fBr_c=\fP\fIval\fP
The core radius of the model set to \fIval\fP. Default: \fB0\fP.
.TP
\fBr_t=\fP\fIval\fP
The truncation radius of the model is set to \fIval\fP.
For \fIval>0\fP the truncation factor is sech(r/\fIval>0\fP), while for
\fIval<0\fP it is 2/(sech(r/|\fIval>0\fP|)+1/sech(r/|\fIval>0\fP|)).
Both have the same asymptotic exponential decay, but the latter affects
the density less at radii smaller than the truncation radius.
\fBNote\fP if \fIval=0\fP, the truncation radius is set to infinity.
Default: \fB0\fP.
.TP
\fBseed=\fP\fInum\fP
We will use \fInum\fP as seed for the (pseudo-) random number generator.
If \fInum\fP=0, a unique new seed is created from the current value of
the time, otherwise, the seed actually provided is used. Default: \fB0\fP.
.TP
\fBq_ran=t|f\fP
If true, we use quasi-random rather than pseudo-random numbers for
drawing position and angles in velocity space. Pseudo-random numbers
are still used in the rejection-method to draw the total velocity from
the DF. Default: \fBf\fP.
.TP
\fBeps=\fP\fIval\fP
If given, all individual softening lengths are set to \fIval\fP.
No Default.
.TP
\fBf_pos=\fP\fIval\fP
The fraction of bodies with positive sense of rotation
about the z-axis is set to \fIval\fP. Default: \fB0.5\fP.
.TP
\fBgiveF=\fP\fIt|f\fP
If true, the phase-space densities of the model are written with
the snapshot in the auxiliary ('aux') data fields.
Default: \fBf\fP.
.TP
\fBgiveP=\fP\fIt|f\fP
If true, the total gravitational potential (internal plus external) at
each body position are written with the snapshot in the 'pot' data
fields.
Default: \fBf\fP.
.TP
\fBgiveA=\fP\fIt|f\fP
If true, the total gravitational acceleration (internal plus external) at
each body position are written with the snapshot in the 'acc' data
fields.
Default: \fBf\fP.
.TP
\fBaccname=\fP\fIname\fP
If given, the potential \fIname\fP is taken as external potential
(in addition to the potential generated by the density model sampled)
and taken into account when computing the equilibrium.
No Default.
.TP
\fBaccpars=\fP\fIvals\fP
If \fBaccname\fP is given, the parameters \fIvals\fP are provided as
parameters for the external potential.
No Default.
.TP
\fBaccfile=\fP\fIfile\fP
If \fBaccname\fP is given, the file \fIname\fP is provided as
data file for the external potential.
No Default.

.SH see also
mkdehnen(1falcON), mkplum(1falcON), mkking(1falcON)
.PP
.nf
McMillan & Dehnen, 2007, MNRAS, 378, 541

.SH files
.ta +3i
.nf
falcON/doc/user_guide.pdf                         \fIUser Guide for falcON\fP
falcON/doc/mkgalaxy_user_guide.pdf                \fIUser Guide for mkhalo
.fi
.SH author
.nf
Walter Dehnen                              walter.dehnen@astro.le.ac.uk
.SH update history of this man page
.nf
.ta +1.0i +2.0i
17-Sep-2007 WD	first version of manual
02-Nov-2007 WD	added giveP and giveA
.fi


