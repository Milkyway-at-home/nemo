.TH RUNBODY1 1NEMO "17 March 2006"
.SH NAME
runbody1, nbody1 \- (frontend to) Aarseth N-body code
.SH SYNOPSIS
.nf
\fBrunbody1\fP [parameter=value]
\fBnbody1  \fP\fI < nbody1.in\fP
.fi
.SH DESCRIPTION
\fBrunbody1\fP is a frontend to the NBODY1 fortran program. 
.PP
Output snapshots are by default not created, and must be  turned on
with a options flag (see \fBkz=\fP below). All of the input
parameter names are the same as their counterpart in the NBODY1
program.
.SH PARAMETERS
The following parameters are recognized in any order if the keyword
is also given:
.TP 20
\fBin=\fP
input file (optional, see \fBnbody=\fP to generate your own input 
data on the fly). If input data are given, you must also set KZ(4)=2 (see 
below).  
Default: not used.
.TP
\fBoutdir=\fP
Output run directory. This directory should not exist, although
can be overriden with NEMO's standard \fBerror=\fP system keyword.
No default.
.TP
\fBnbody=\fP
** Total particle number. The maximum value (NMAX) is compiled into
the NBODY1 program. Note that even if input files are supplied, this
parameter is needed.
No default.
.TP
\fBnfix=\fP
Output frequency of data save (KZ(3)) or binaries (KZ(6)).
[Default: 1]
.TP
\fBnrand=\fP
Random number sequence skip.
[Default: 0]
.TP
\fBnrun=\fP
Run identification index. Not really used for anything, just a relic from
nameless Aarseth-type files. The \fBoutdir\fP now has this function.
[Default: 1]
.TP
\fBeta=\fP
** Time-step parameter for force polynomial.
[Default: 0.02]
.TP
\fBdeltat=\fP
Output time interval in units of the crossing time (M**2.5/(2E)**1.5).
[Default: 0.25]
.TP
\fBtcrit=\fP
Termination time in units of the crossing time.
[Default: 5]
.TP
\fBqe=\fP
Energy tolerance (restart if DE/E > 5*QE & KZ(2) > 1)
[Default: 2e-5]
.TP
\fBeps=\fP
Potential softening parameter     
[Default: 0.01]
.TP
\fBkz=\fP
** Non-zero options for alternative paths (see below) 
[Default: 1,0,0,0,1,1,0,0,0,0,0,0,0,0,0]
.nf
.ta +0.5i
   1  COMMON save on unit 1 if TCOMP > CPU or if TIME > TCRIT. [1]
   2  COMMON save on unit 2 at output (=1); restart if DE/E > 5*QE (=2). [0]
   3  Basic data written to unit 3 at output time (frequency NFIX). [0]
   4  Initial conditions on unit 4 (=1: output; =2: input). [0]
   5  Initial conditions (=0: uniform & isotropic; =1: Plummer). [1]
   6  Output of significant binaries. [1]
   7  Output of movie frames on unit 7. [0]
   8  Generation of two subsystems (merger experiment). [0]
   9  Individual bodies printed at output time (MIN(5**KZ9,N)). [0]
  10  No scaling of initial conditions. [0]
  11  Modification of ETA by tolerance QE. [0]
  12  Initial parameters for binary orbit. [0]
  13  Escaper removal (R > 2*RTIDE; RTIDE = 10*RSCALE). [0]
  14  Adjustment of coordinates & velocities to c.m. condition. [0]
  15  Not used at present [0]
.fi
.TP
\fBalphas=\fP
** Power-law index for initial mass function (routine DATA)
[Default: 2.3]
.TP
\fBbody1=\fP
Maximum particle mass before scaling   
[Default: 5.0]
.TP
\fBbodyn=\fP
Minimum particle mass before scaling   
[Default: 1.0]
.TP
\fBq=\fP
** Virial ratio (q=0.5 for virial equilibrium)  
[Default: 0]
.TP
\fBvxrot=\fP
XY-velocity scaling factor (> 0 for solid-body rotation)
[Default: 0]
.TP
\fBvzrot=\fP
Z-velocity scaling factor (not used if VXROT =
[Default: 0]
.TP
\fBrbar=\fP
Virial radius in pc (for scaling to physical
[Default: 1]
.TP
\fBzmbar=\fP
Mean mass in solar units   
[Default: 1]
.TP
\fBxcm=\fP
** Displacement for subsystem (routine SCALE; KZ(8)) 
.TP
\fBecc=\fP
Eccentricity of relative motion for subsystem (ECC =< 1)
.TP
\fBkstart=\fP
** Run mode: 1=new >1 restart, with increasing options of resetting 
variables. Only new runs are currently supported.
.TP
\fBtcomp=\fP
not supposed to be used, but counts max computing time alotted.
.SH BUGS
Scaling can cause output to become out of bounds.
.PP
Coding the the input-order logic in the frontend program can be hazardous
to your health. It will depend on how the nbody1 main program is structured.
.SH INPUT
Order of input lines in "nbody1.in" for a new run (KSTART=1)
.nf

          variables                   condition             where
  ----------------------------    -------------------	  ---------
  KSTART TCOMP                                            MAIN
  Nbody NFIX NRAND NRUN                                   INPUT
  ETA DELTAT TCRIT QE EPS                                 INPUT
  KZ(1..15)                                               INPUT
      ALPHAS BODY1 BODYN          KZ(4).NE.2              DATA
      SEMI ECC                    KZ(12).NE.0             DATA
  Q VXROT VZROT RBAR ZMBAR                                SCALE
      NFRAME DELTAF               KZ(7).GT.0              SCALE
      XCM ECC                     KZ(8).GT.0              SUBSYS
.fi
.SH SEE ALSO
nbody0(1NEMO), runbody2(1NEMO), snapshot(5NEMO), u3tos(1NEMO), stou4(1NEMO)
.SH FILES
.nf
.ta +3i
$NEMO/src/nbody/evolve/aarseth/nbody1	nbody code
$NEMO/src/nbody/evolve/aarseth/tools	various tools code
.ta +2i
$outdir/fort.1                       	restart dump (compile time dep. size)
$outdir/fort.2                         	restart dump (compile time dep. size)
$outdir/fort.4                         	restart dump (compile time dep. size) (see \fIstou4(1NEMO)\fP and \fIu4tos(1NEMO)\fP)
$outdir/fort.7                         	formatted frame files (option KZ(7))
$outdir/OUT3                        	particle dump (see \fIu3tos(1NEMO)\fP)
.fi
.SH AUTHOR
Peter Teuben
.SH UPDATE HISTORY
.nf
.ta +1.0i +4.0i
4-mar-98	V1.1 documented, and changed out= to outdir=, n= to nbody= PJT
17-mar-04	V1.1a fixed bug when in= was specified
17-mar-06	V1.2 using fullname for in=
.fi
